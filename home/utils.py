from pathlib import Path
from btlMalwareDetection.src import pipeline_stat
import os 

PATH_TO_CHECKPOINT = 'btlMalwareDetection/checkpoint/stat/'
PATH_TO_UPLOAD = 'upload_file/'

model = pipeline_stat.Model(PATH_TO_CHECKPOINT)

def predict_malware_file(path_to_file):
    ans = model.predict_from_path(path_to_file)
    return ans    

def get_file_size(file):
    x = file.size
    y = 512000
    if x < y:
        value = round(x/1000, 2)
        ext = ' kb'
    elif x < y*1000:
        value = round(x/1000000, 2)
        ext = ' Mb'
    else:
        value = round(x/1000000000, 2)
        ext = ' Gb'
    return str(value)+ext
